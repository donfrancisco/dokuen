{"name":"Dokuen","body":"# Dokuen, a Personal App Platform\r\n\r\nDokuen is a \"personal app platform\". It's the same idea as all of these PaaS and IaaS services out there, except you host it on\r\nyour own machine. Currently, Dokuen supports Mac and Ubuntu. [Here](http://bugsplat.info/2012-05-17-dokuen-a-personal-app-platform.html) is an article that explains my motivations.\r\n\r\n## Requirements\r\n\r\n* [Gitolite](https://github.com/sitaramc/gitolite)\r\n* [Nginx](http://wiki.nginx.org/Main)\r\n\r\n## Installation\r\n\r\n\r\n### Step 1\r\n\r\nWARNING: At the moment Dokuen needs a custom version of Mason. A patch has been accepted but as\r\nof now (2012-05-19) there hasn't been a release with this patch. So, install mason:\r\n\r\n```\r\n$ git clone https://github.com/peterkeen/mason\r\n$ cd mason\r\n$ gem build mason.gemspec\r\n$ gem install mason-0.0.11.gem\r\n```\r\n\r\nThen, install dokuen:\r\n```\r\ngem install dokuen\r\n```\r\n\r\n### Step 2\r\n\r\nInstall nginx using homebrew or your distro's package manager:\r\n\r\n```\r\n$ brew install nginx\r\n```\r\n\r\n### Step 3\r\n\r\nCreate a `git` user and install gitolite according to [package directions](http://sitaramc.github.com/gitolite/qi.html). You'll be making changes to the config later, but for now you should be able to create a new repository and push to it.\r\n\r\n### Step 4\r\n\r\nRun this:\r\n\r\n```\r\n$ sudo mkdir -p /usr/local/var/dokuen\r\n$ cd /usr/local/var/dokuen\r\n$ sudo dokuen setup .\r\n```\r\n\r\nThis will ask you a few questions, set up a few directories, and install a few useful commands. It'll also show you some things you need to do.\r\n\r\n## Creating an App\r\n\r\n```\r\n$ ssh git@<your_host> dokuen create --application=<name>\r\ngit@<your_host>:<name>.git\r\n\r\n$ git remote add dokuen git@<your_host>:<name>.git\r\n```\r\n\r\n### Add some environment variables\r\n\r\n```\r\n$ ssh git@<your_host> dokuen config_set -V BUILDPACK_URL=\"https://github.com/heroku/heroku-buildpack-ruby.git\" DOKUEN_SCALE=\"web=1\" --application=<name>\r\n```\r\n\r\n### Deploy\r\n```\r\n$ git push dokuen master\r\n<deploy transcript>\r\n```\r\n\r\n### Check it out!\r\n```\r\n$ open http://<your_host>:12345/\r\n```\r\n\r\n## Available \"app\" Sub-commands\r\n\r\n* `create`\r\n* `config_set <key>=<value> ...`\r\n* `config_delete <key> ...`\r\n* `scale <type>=<num>...`\r\n* `buildpacks`\r\n* `install_buildpack <url>`\r\n* `remove_buildpack <name>`\r\n* `run_command <command>`\r\n* `shutdown`\r\n* `restart`\r\n\r\n## DNS Setup\r\n\r\nI have my home router set up to forward ports 80 and 443 to my mac mini, and I have a dynamic DNS system set up with a wildcard CNAME Unfortunately this setup is hard to automate so Dokuen doesn't manage any of it for you.\r\n\r\nWhat it does do is set up Nginx server configs for you that you can choose to use. If you want to use them, put this at the bottom of the `http` section of `nginx.conf`:\r\n\r\n```\r\ninclude /usr/local/var/dokuen/nginx/*.conf;\r\n```\r\n\r\nThen, force a restart of your app:\r\n\r\n```\r\n$ ssh git@<your_host> dokuen scale web=0 --application=<name>\r\n$ ssh git@<your_host> dokuen scale web=1 --application=<name>\r\n```\r\n\r\n## Rails\r\n\r\nUnfortunately the stock Heroku buildpacks install a vendored node.js compiled for the Heroku platform, which happens to be linux. This doesn't work for Mac, which means you have to use a slightly patched version. This one works with a homebrew-installed node.js: https://github.com/peterkeen/heroku-buildpack-ruby\r\n\r\n## License\r\n\r\nMIT\r\n\r\n## Contact and Development\r\n\r\nFork and send me a pull request. If you'd like to talk about Dokuen there's `#dokuen` on `irc.freenode.net`, as well as a [mailing list](https://groups.google.com/forum/#!forum/dokuen). ","tagline":"A personal PaaS for mac and linux","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}